<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GEDE SERVIZI - Gas Business</title>

    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: #f5f7fa;
            color: #333;
        }

        header {
            background: #003366;
            color: white;
            padding: 18px;
            font-size: 22px;
            text-align: center;
            font-weight: bold;
        }

        .container {
            max-width: 1100px;
            margin: 25px auto;
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.08);
        }

        h2 {
            color: #003366;
            margin-bottom: 12px;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        label {
            font-weight: 600;
            display: block;
            margin-bottom: 6px;
        }

        input {
            width: 100%;
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #ccc;
            font-size: 16px;
        }

        button {
            background-color: #0066cc;
            padding: 12px 18px;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 15px;
        }

        button:hover { background-color: #004c99; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 18px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
        }

        th {
            background: #e8f0fe;
            font-weight: 700;
        }

        tr:nth-child(even) { background: #f9f9f9; }

        .section-title {
            margin-top: 30px;
            font-size: 20px;
            font-weight: bold;
            color: #004080;
            text-align: center;
        }

        .note {
            margin-top: 12px;
            font-size: 14px;
            color: #666;
            text-align: center;
        }

        @media (max-width:700px) {
            .grid { grid-template-columns: 1fr; }
        }
    </style>
</head>

<body>

<header>GEDE SERVIZI – Comparatore Gas Business</header>

<div class="container">

    <h2>Dati di Consumo</h2>

    <div class="grid">
        <div>
            <label>Consumo Mensile (Smc)</label>
            <input type="number" id="consumo" value="100" step="0.01">
        </div>
        <div>
            <label>PSV (€/Smc)</label>
            <input type="number" id="psv" value="0.40" step="0.0001">
        </div>
    </div>

    <button onclick="calcola()">Calcola Offerte</button>

    <p class="note">
        I valori mostrati sono stime mensili **IVA e imposte escluse**.
    </p>

    <div id="risultati"></div>

</div>

<script>

function fmt(n) { return parseFloat(n).toFixed(2); }

// ---- MODELLI DI TARIFFE ---- //

function CEI(name, spread, qf, varUnit, consumo, psv) {
    const materia = consumo * (psv + spread);
    const variabili = consumo * varUnit;
    const totale = materia + variabili + qf;

    return `
        <tr>
            <td>${name}</td>
            <td>€ ${fmt(materia)}</td>
            <td>€ ${fmt(qf)}</td>
            <td>€ ${fmt(variabili)}</td>
            <td><b>€ ${fmt(totale)}</b></td>
        </tr>`;
}

function Estra(name, prezzo, qf, consumo) {
    const materia = consumo * prezzo;
    const totale = materia + qf;

    return `
        <tr>
            <td>${name}</td>
            <td>€ ${fmt(materia)}</td>
            <td>€ ${fmt(qf)}</td>
            <td>€ 0.00</td>
            <td><b>€ ${fmt(totale)}</b></td>
        </tr>`;
}

// ---- CALCOLO PRINCIPALE ---- //

function calcola() {

    const consumo = parseFloat(document.getElementById("consumo").value);
    const psv = parseFloat(document.getElementById("psv").value);

    let html = `
        <h2 class="section-title">Risultati Comparazione</h2>

        <table>
            <tr>
                <th>Offerta</th>
                <th>Materia Prima</th>
                <th>Quota Fissa</th>
                <th>Variabili</th>
                <th>Totale</th>
            </tr>
    `;

    // CEI > 10.000 Smc – Spread e Quote corrette
    html += CEI("CEI Partner (>10.000 Smc)", 0.120, 14, 0.0564, consumo, psv);
    html += CEI("CEI Pro (>10.000 Smc)", 0.100, 14, 0.0564, consumo, psv);
    html += CEI("CEI Flex (>10.000 Smc)", 0.080, 14, 0.0564, consumo, psv);

    // CEI < 10.000 Smc
    html += CEI("CEI Reflex (<10.000 Smc)", 0.080, 26, 0.1064, consumo, psv);
    html += CEI("CEI Canon (<10.000 Smc)", 0.080, 19.50, 0.0864, consumo, psv);
    html += CEI("CEI Vision (<10.000 Smc)", 0.090, 15, 0.0564, consumo, psv);

    // Estra
    html += Estra("Estra Business Variabile", psv + 0.10, 12, consumo);
    html += Estra("Estra Business Fissa", 0.52, 12, consumo);

    html += `</table>`;

    document.getElementById("risultati").innerHTML = html;
}

window.onload = calcola;

</script>

</body>
</html>
